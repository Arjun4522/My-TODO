<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Enhanced Calendar To-Do App</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="save-status" id="save-status"></div>
  
  <div class="container">
    <h1>ðŸ“… My Tasks</h1>
    
    <div class="tabs">
      <button class="tab active" onclick="switchTab('daily')">Daily View</button>
      <button class="tab" onclick="switchTab('summary')">All Tasks Summary</button>
    </div>

    <!-- Daily View Tab -->
    <div id="daily-tab" class="tab-content active">
      <div class="date-section">
        <input type="date" id="calendar">
      </div>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-number" id="total-tasks">0</div>
          <div class="stat-label">Total</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="completed-tasks">0</div>
          <div class="stat-label">Completed</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="remaining-tasks">0</div>
          <div class="stat-label">Remaining</div>
        </div>
      </div>

      <div class="task-input-section">
        <div class="task-input-form">
          <input type="text" id="task-title" placeholder="Task title (required)">
          <textarea id="task-body" placeholder="Task description (optional)"></textarea>
          <div class="add-task-row">
            <button id="add-task">Add Task</button>
          </div>
        </div>
      </div>

      <div class="task-list-section">
        <div class="task-list-header">
          <div class="selected-date" id="selected-date">Today's Tasks</div>
          <div class="task-count" id="task-count">0 tasks</div>
        </div>
        <ul id="todo-list"></ul>
      </div>
    </div>

    <!-- Summary View Tab -->
    <div id="summary-tab" class="tab-content">
      <div class="summary-stats">
        <div class="stat-item">
          <div class="stat-number" id="all-total-tasks">0</div>
          <div class="stat-label">All Tasks</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="all-completed-tasks">0</div>
          <div class="stat-label">Completed</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="all-pending-tasks">0</div>
          <div class="stat-label">Pending</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="dates-with-tasks">0</div>
          <div class="stat-label">Active Dates</div>
        </div>
      </div>

      <div class="data-controls">
        <button class="export-btn" onclick="exportData()">Export Data</button>
        <button class="import-btn" onclick="document.getElementById('import-file').click()">Import Data</button>
        <input type="file" id="import-file" accept=".json" onchange="importData(event)">
        <button class="clear-btn" onclick="clearAllData()">Clear All Data</button>
      </div>

      <div class="filter-section">
        <select class="filter-select" id="status-filter" onchange="updateSummaryTable()">
          <option value="all">All Tasks</option>
          <option value="completed">Completed</option>
          <option value="pending">Pending</option>
        </select>
        <input type="text" class="search-input" id="search-input" placeholder="Search tasks..." oninput="updateSummaryTable()">
        <div class="page-size-selector">
          <span>Show:</span>
          <select class="page-size-select" id="page-size-select" onchange="changePageSize()">
            <option value="10">10 per page</option>
            <option value="25" selected>25 per page</option>
            <option value="50">50 per page</option>
            <option value="100">100 per page</option>
          </select>
        </div>
      </div>

      <div class="summary-table-container">
        <table class="summary-table">
          <thead>
            <tr>
              <th style="width: 120px;">Date</th>
              <th>Task</th>
              <th style="width: 100px;">Status</th>
              <th style="width: 100px;">Created</th>
              <th style="width: 120px;">Actions</th>
            </tr>
          </thead>
          <tbody id="summary-table-body">
          </tbody>
        </table>
      </div>

      <div class="pagination-container">
        <div class="pagination-info" id="pagination-info">
          Showing 0-0 of 0 tasks
        </div>
        <div class="pagination-controls" id="pagination-controls">
          <!-- Pagination buttons will be dynamically generated -->
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Task Modal -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit Task</h3>
      </div>
      <form class="modal-form">
        <input type="text" id="edit-title" class="modal-input" placeholder="Task title">
        <textarea id="edit-description" class="modal-textarea" placeholder="Task description (optional)"></textarea>
      </form>
      <div class="modal-actions">
        <button type="button" class="modal-btn modal-btn-secondary" onclick="closeEditModal()">Cancel</button>
        <button type="button" class="modal-btn modal-btn-primary" onclick="saveEditedTask()">Save Changes</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>